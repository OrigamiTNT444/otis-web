%%fakesection Page setup
\areaset[0.375in]{4.5in}{8in}
\setlength{\paperwidth}{6in} % set size for latex
\setlength{\paperheight}{9in}
\special{papersize=6in,9in} % set size for ghostscript
\typearea[6mm]{1} % 6mm for spine

%%fakesection Packages
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{todonotes}
\usepackage{hyperref}
\usepackage{asymptote}
\usepackage{xcolor}
\usepackage{makeidx}
\usepackage{cleveref}
\makeindex
\renewcommand{\asydir}{asy}

\usepackage{epigraph}
\renewcommand{\epigraphsize}{\scriptsize}
\renewcommand{\epigraphwidth}{60ex}

\usepackage{von}
\renewcommand{\vonenvname}{example}

\begin{asydef}
	usepackage("amsmath");
	usepackage("amssymb");
	usepackage("amsthm");
	defaultpen(fontsize(10pt));
\end{asydef}

%%fakesection enumitem
\usepackage[shortlabels]{enumitem}
% a list I like for walkthrough's --- Drew-style parts
\newlist{walk}{enumerate}{3}
\setlist[walk]{label=\bfseries (\alph*)}

%%fakesection Macros
\newcommand{\ii}{\item}
\newcommand{\CC}{\mathbb C}
\newcommand{\FF}{\mathbb F}
\newcommand{\NN}{\mathbb N}
\newcommand{\QQ}{\mathbb Q}
\newcommand{\RR}{\mathbb R}
\newcommand{\EE}{\mathbb E}
\newcommand{\ZZ}{\mathbb Z}
\newcommand{\dang}{\measuredangle} %% Directed angle
\newcommand{\wt}{\widetilde}
\newcommand{\inv}{^{-1}}
\newcommand{\half}{\frac12}
\newcommand{\defeq}{\coloneqq}
\newcommand{\dg}{^\circ}
\newcommand{\ol}{\overline}
\newcommand{\ts}{\textsuperscript}
\newcommand{\eps}{\varepsilon}
\newcommand{\opname}{\operatorname}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\alert}[1]{\textbf{\color{blue} #1}}
\newcommand{\vocab}[1]{\textbf{\color{green!40!black} #1}}
\newcommand{\hrulebar}%
{\par\hspace{\fill}\rule{0.75\linewidth}{.5pt}\hspace{\fill}
\par\nointerlineskip \vspace{\baselineskip}}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\id}{id}
\usepackage{listings}


%%fakesection Fancy section and chapter heads
\addtokomafont{partprefix}{\rmfamily}
\renewcommand*{\partformat}{\color{purple}
	\scalebox{2.5}{\thepart}\enlargethispage{2em}}
\addtokomafont{chapterprefix}{\raggedleft}
\RedeclareSectionCommand[beforeskip=0.5em]{chapter}
\renewcommand*{\chapterformat}{\mbox{%
	\scalebox{1.5}{\chapappifchapterprefix{\nobreakspace}}%
	\scalebox{2.718}{\color{purple}\thechapter}\enskip}}
\renewcommand*{\sectionformat}%
	{\color{purple}\S\thesection\enskip}
\renewcommand*{\subsectionformat}%
	{\color{purple}\S\thesubsection\enskip}
\renewcommand*{\subsubsectionformat}%
	{\color{purple}\S\thesubsubsection\enskip}
\KOMAoptions{numbers=noenddot}
%\usepackage[tocindentauto]{tocstyle}
%\usetocstyle{KOMAlike}


%%fakesection Theorems
%% Theorems
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem*{theorem*}{Theorem}
\newtheorem*{lemma*}{Lemma}
\newtheorem*{proposition*}{Proposition}
\newtheorem*{corollary*}{Corollary}

% More Def-style theorems
\theoremstyle{definition}

\newtheorem{claim}[theorem]{Claim}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{fact}[theorem]{Fact}
\newtheorem*{claim*}{Claim}
\newtheorem*{conjecture*}{Conjecture}
\newtheorem*{definition*}{Definition}
\newtheorem*{fact*}{Fact}

\newtheorem{note}[theorem]{Note}
\newtheorem{remark}[theorem]{Remark}
\newtheorem*{note*}{Note}
\newtheorem*{remark*}{Remark}

\theoremstyle{remark}
\newtheorem*{exercise}{Exercise}

% PROBLEMS
%\newtheorem{exampleA}{\color{blue}Example}[chapter]
%\renewcommand{\theexampleA}{\thechapter\Alph{exampleA}}
%\newtheorem{exampleB}{\color{blue}Example}[chapter]
%\renewcommand{\theexampleB}{\thechapter\Alph{exampleB}}
\newcommand{\walkthrough}{\par\noindent%
	\textbf{\color{green!30!black}Walkthrough.}
	\hspace{1ex}}
\theoremstyle{definition}

\usepackage{thmtools}
\usepackage{mdframed}
\declaretheorem[name={\color{blue}Problem},style=definition]{problem}
\declaretheorem[name={\color{blue}Example},style=definition,sibling=problem]{example}

%% Sol environments
\newcounter{solnum}
% soln
\newenvironment{soln}{\stepcounter{solnum}\par\medskip\noindent
{\bfseries\normalsize\color{red!60!black}Solution \thesolnum.}}%
{\leavevmode\unskip\penalty9999 \hbox{}\nobreak\hfill
\quad\hbox{\ensuremath{\blacksquare}}
\par\medskip}
% solution
\newenvironment{solution}[1]{\stepcounter{solnum}\par\medskip\noindent
{\bfseries\normalsize\color{red!60!black}Solution \thesolnum\ (#1).}}%
{\hrulebar}
\newcommand{\stepsol}{\stepcounter{solnum}}


%\declaretheorem[name=,style=definition]{solution}

\mdfdefinestyle{bogusbox}{%
	backgroundcolor=gray!20,
	topline=false,
	rightline=false,
	leftline=false,
	bottomline=false,
	innertopmargin=0pt,
	skipabove=12pt,
	skipbelow=2pt,
	nobreak=true,
}
\declaretheorem[mdframed={style=bogusbox},name=Bogus Solution,style=remark,numbered=no]{bogus}

%%fakesection Headings
\usepackage[headsepline]{scrlayer-scrpage}
\automark[chapter]{chapter}
\rohead{\footnotesize \today}
\rehead{\footnotesize The OTIS Excerpts, by Evan Chen}
\lehead{\footnotesize \today}
\lohead{\footnotesize \leftmark}
\chead{}
\rofoot{\thepage}
\refoot{}
\lefoot{\thepage}
\lofoot{}
%\cfoot{\pagemark}

%%fakesection Bibliography
\usepackage[backend=biber,backref=true,style=alphabetic]{biblatex}
\DeclareFieldFormat{labelalpha}{\textbf{\small #1}}
\DefineBibliographyStrings{english}{%
	backrefpage  = {cited p.}, % for single page number
	backrefpages = {cited pp.} % for multiple page numbers
}
\DeclareFieldFormat{journaltitle}{\mkbibemph{#1},} % italic journal title with comma
\DeclareFieldFormat[inbook,thesis]{title}{\mkbibemph{#1}\addperiod} % italic title with period
\DeclareFieldFormat[article]{title}{#1} % title of journal article is printed as normal text
\DeclareFieldFormat[article]{volume}{\textbf{#1}\addcolon\space}
\renewcommand{\mkbibnamefirst}[1]{\textsc{#1}}
\renewcommand{\mkbibnamelast}[1]{\textsc{#1}}
\renewcommand{\mkbibnameprefix}[1]{\textsc{#1}}
\renewcommand{\mkbibnameaffix}[1]{\textsc{#1}}
\renewcommand{\finentrypunct}{}
\addbibresource{refs.bib}
